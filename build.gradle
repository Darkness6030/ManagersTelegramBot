plugins {
    id 'java'
}

compileJava.options.encoding = 'UTF-8'
compileTestJava.options.encoding = 'UTF-8'

group = 'net.darkness'
version = '1.0'

repositories {
    mavenCentral()
    maven { url = "https://s01.oss.sonatype.org/content/repositories/snapshots" }
}

dependencies {
    // Telegram
    implementation 'com.telegram4j:telegram4j-core:0.1.0-SNAPSHOT'

    // SQLite
    implementation("org.xerial:sqlite-jdbc:3.44.1.0")
    implementation("com.j256.ormlite:ormlite-jdbc:6.1")

    // Lombok
    compileOnly 'org.projectlombok:lombok:1.18.28'
    annotationProcessor 'org.projectlombok:lombok:1.18.28'
}

jar {
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }

    manifest {
        attributes("Main-Class": "net.darkness.Main")
    }
}

rootProject.tasks.named("jar") {
    duplicatesStrategy = 'include'
}